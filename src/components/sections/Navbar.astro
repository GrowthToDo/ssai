---
import Button from "@ui/Button.astro";

const currentPath = Astro.url.pathname;

const links = [
  { label: "How it Works", href: `${import.meta.env.BASE_URL}how-it-works` },
  { label: "Pilot", href: `${import.meta.env.BASE_URL}pilot` },
  { label: "Articles", href: `${import.meta.env.BASE_URL}articles` },
];

const primaryCTA = {
  text: "Book a Call",
  href: "https://cal.com/gautham-8bdvdx/30min",
};
---

<header
  class="fixed start-1/2 top-5 z-50 mx-auto w-full -translate-x-1/2 transform"
>
  <nav
    class="mx-auto flex w-full max-w-6xl items-center justify-between rounded-2xl border border-slate-200 bg-white/90 px-4 py-3 shadow-sm backdrop-blur sm:px-6"
    aria-label="Primary"
  >
    {/* Left: Logo */}
    <div class="flex items-center gap-x-3">
      <a
        class="dm-sans flex-none text-xl font-semibold text-slate-900 focus:opacity-80 focus:outline-hidden"
        href={import.meta.env.BASE_URL}
        aria-label="SimpleScheduleAI"
        translate="no"
      >
        <span class="text-teal-700">Simple</span><span class="text-slate-700">Schedule</span><span class="text-teal-700">AI</span>
      </a>
    </div>

    {/* Mobile toggle */}
    <button
      type="button"
      class="hs-collapse-toggle inline-flex size-10 items-center justify-center rounded-xl border border-slate-200 text-slate-800 hover:bg-slate-50 focus:bg-slate-50 focus:outline-hidden lg:hidden"
      id="hs-header-base-collapse"
      aria-expanded="false"
      aria-controls="hs-header-base"
      aria-label="Toggle navigation"
      data-hs-collapse="#hs-header-base"
    >
      <svg
        class="size-5 hs-collapse-open:hidden"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="3" x2="21" y1="6" y2="6"></line>
        <line x1="3" x2="21" y1="12" y2="12"></line>
        <line x1="3" x2="21" y1="18" y2="18"></line>
      </svg>

      <svg
        class="hidden size-5 hs-collapse-open:block"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M18 6 6 18"></path>
        <path d="m6 6 12 12"></path>
      </svg>

      <span class="sr-only">Toggle navigation</span>
    </button>

    {/* Desktop + Mobile nav */}
    <div
      id="hs-header-base"
      class="hs-collapse hidden w-full grow basis-full overflow-hidden transition-all duration-300 lg:ml-10 lg:block lg:w-auto lg:basis-auto"
      aria-labelledby="hs-header-base-collapse"
    >
      <div class="mt-4 flex flex-col gap-3 lg:mt-0 lg:flex-row lg:items-center lg:gap-6">
        {/* Push links to the right on desktop */}
        <div class="lg:ml-auto flex flex-col gap-2 lg:flex-row lg:items-center lg:gap-5">
          {links.map((link) => (
            <a
              href={link.href}
              class={`rounded-xl px-3 py-2 text-base font-semibold tracking-tight text-slate-800 hover:bg-slate-50 focus:bg-slate-50 focus:outline-hidden ${
                currentPath === link.href ? "text-teal-800 underline underline-offset-4" : ""
              }`}
              aria-current={currentPath === link.href ? "page" : undefined}
            >
              {link.label}
            </a>
          ))}
        </div>

        {/* CTA */}
        <div class="flex items-center lg:pl-2">
          <Button
            href={primaryCTA.href}
            variant="primary"
            className="inline-flex text-nowrap border-none px-5! py-2.5! text-base!"
          >
            {primaryCTA.text}
          </Button>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  document.addEventListener("astro:page-load", async () => {
    const preline = await import("preline/preline.js");
    preline.HSStaticMethods.autoInit();
  });
</script>